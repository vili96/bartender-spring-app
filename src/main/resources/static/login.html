<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Login</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<h1>LOGIN PAGE MAINA</h1>
<div class="container">

<div class="row">
			

			<div class="col container-stuff">
				<form action="login" method="post" id="login-form">

					<div class="form-group">
						<div class="input-group">
							<div class="input-group-prepend">
								<span class="input-group-text">
									<i class="fa fa-user"></i>
								</span> 
							</div>
							<input class="form-control" type="text" id="username"
								name="username" placeholder="Потребител">
						</div>
					</div>
						
					
					<div class="form-group">
						<div class="input-group">
							<div class="input-group-prepend">
								<span class="input-group-text">
									<i class="fa fa-lock"></i>
								</span> 
							</div>							
								
							<input class="form-control" type="password" id="password"
							name="password" placeholder="Парола">
						</div>
					</div>

					<input type="hidden" name="router" value="login">

					<button type="submit" class="btn btn-primary"  id="login"> Влез </button>
					<button type="button" class="btn btn-success pull-right" data-toggle="modal" data-target="#register-modal" id="register"> Регистрация </button>
				
				</form>
			</div>
		</div>


			<form id="register-form" action="register" method="post">
					<div class="form-group">
						<label for="register_user">Потребител</label>
						<input type="text" class="form-control"
						id="register_user" name="username" placeholder="Потребител">
					</div>
					<div class="form-group">
						<label for="register_pass">Парола</label>
						<input type="password" class="form-control"
						id="register_pass" name="password" placeholder="Парола">
					</div>
					
					<input type="hidden" value="register" name="router" />
					
					<div class="form-group">
						<label for="confirm_register_pass">Повтори паролата</label>
						<input type="password" class="form-control"
						id="confirm_register_pass" name="repeatPassword" placeholder="Парола">
					</div>
				<button type="button" class="btn btn-default" data-dismiss="modal">Затвори</button>
				<button type="submit" form="register-form" class="btn btn-success">Регистрация</button>
				</form>
				

</div>


<script>
$('#login-form').submit(function (e) {
	console.log("TEEEEEEEEEES");
	e.preventDefault(); //prevents the default event of the element
	$.ajax({
		url:"/login", //the action of the form
		method:"POST",
		data:{
			username:$("#username").val(),
			password:$("#password").val()
		},
		success:function(data){
			console.log("Response is: "+data);
			window.location.replace(data);
		},
		fail:function(){
			console.log("Error logging in: "+data);
			window.location.href("error.html");
		}
	});
    
});

</script>
</body>
</html>